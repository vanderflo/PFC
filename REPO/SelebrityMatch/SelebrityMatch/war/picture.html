<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Home</title>

    <!-- Sets initial viewport load and disables zooming  -->
    <meta name="viewport" content="initial-scale=1, maximum-scale=1, user-scalable=no">

    <!-- Makes your prototype chrome-less once bookmarked to your phone's home screen -->
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">

    <!-- Set Apple icons for when prototype is saved to home screen -->
    <link rel="apple-touch-icon-precomposed" sizes="114x114" href="touch-icons/apple-touch-icon-114x114.png">
    <link rel="apple-touch-icon-precomposed" sizes="72x72" href="touch-icons/apple-touch-icon-72x72.png">
    <link rel="apple-touch-icon-precomposed" sizes="57x57" href="touch-icons/apple-touch-icon-57x57.png">
    <script type="text/javascript" src="jquery-1.8.2.js"></script>
    
    <!-- Include the compiled Ratchet CSS -->
    <link rel="stylesheet" href="css/main.css">

    <!-- Include the compiled Ratchet CSS -->
    <link rel="stylesheet" href="css/ratchet.css">



  </head>
  <body>
  <script>
        // When document ready, call initMenu() function 
        $(document).ready(function() {
        	
        	var counterID=1;
        	var totalQuestions=5;
        	var userPoints=0;
        	initGame();
        	game(counterID);       	

        	
        	function game(id){
        	$(xmlGame).find('game').each(function(){
        		var gameID=$(this).attr("id");
        		if(gameID==counterID){
        					$(this).find('question').each(function(){	
	        				var question= $(this).children('qtext').text();
	                		var pic=$(this).children('qpic').text();
	                		$('#pageTitle').empty();
	                		$('#pageTitle').append('<h2><a class="question">'+question+'</a></h2>');
	                		$('#picture').empty();
	                		$('#picture').append('<img src="'+pic+'" id="pictoshow">');
	        				});//question
	        				var counter=1;
	        				$('#bottom').empty();
	        				$('#footer').empty();
	        				$(this).find('option').each(function(){
		        				var idAnswer=$(this).attr("id");
		        				var option= $(this).children('text').text();
		        				var opicture= $(this).children('pic').text();
								$('#bottom').append('<div id="answer-"'+counter+'><a id="answer" class="button-block" answerid="'+idAnswer+'">'+option+'</a></div>');
								counter=counter+1;
	        				});//option        			
            		}//if
        	});//game
        	}
        	
        	$("#answer").live("click",function() {
    			var idAnswer=$(this).attr("answerid");
    			$('#footer').empty();	           
    			
    			$(xmlGame).find('answer'+counterID).each(function(event){
    				console.log("cid:"+counterID);
    				var answerok= $(this).children('answerok').text();
    				var messageok= $(this).children('messageok').text();
    				var messageko= $(this).children('messageko').text();
    				var points= $(this).children('points').text();
    				$('#message').empty();
    				var status=$("#bottom").css("display");
    				$("#bottom").css("display", "none");
    				if(idAnswer == answerok){    					

    					userPoints=userPoints+parseInt(points);    					
    					if (counterID<totalQuestions){    					
    					$('#message').append('<a class="flip" href="#" id="nextGame"><img src="images/right.png"/></a>');
    					}else{
    						$('#pageTitle').empty();
        					$('#message').append('<h1><a class="topbutton">FINISH!!!</a></h1>');
        					$('#message').append('<h1><a>YOU GOT '+userPoints+' POINTS</a></h1>');
						}
    						
    				}else{
    					$('#message').append('<a class="flip" href="#" id="tryAgain"><img src="images/wrong.png"/></a>');
    				}
    				
    				$('.upper').toggleClass('rotate-3d');  
    	            event.preventDefault();  
    				
    			});

    		   });  //answer
    		   
    		   $("#nextGame").live("click",function(event) {
    			   counterID=counterID+1;   
    			   $('.upper').toggleClass('rotate-3d');  
   	            	event.preventDefault(); 
   	            	$("#bottom").css("display", "block");
    			   game(counterID);		  
    			});
    	
    		   $("#tryAgain").live("click",function(event) {
    			    $('.upper').toggleClass('rotate-3d');  
   	            	event.preventDefault(); 
   	            	$("#bottom").css("display", "block");	  
    			});
    		   
    		 //  $('a.flip').live("click",function(event){  
    	       //     $('.upper').toggleClass('rotate-3d');  
    	         //   event.preventDefault();  
    	        	//});  
    	    	 
		function initGame(){
 			$.ajax({
     		    type: "GET",
     		    url: "game1.xml",
 				dataType: "xml",
 				async: false,
     		     success : function(data) {
     		    	xmlGame = data;
     		         }
     		    });
 			}
        });
    </script>
  <!-- Make sure all your bars are the first things in your <body> -->
  <header class="bar-title">
    <div class="logo">
      <img src="images/logo.png">
    </div>
  </header>

  <!-- Wrap all non-bar HTML in the .content div (this is actually what scrolls) -->
  <div class="content">
    <div class="page-title" id="pageTitle">
      
    </div>

    <div class ="upper">
      <div id="picture" class="card front">
        
      </div> 
      
       <div class="card back" id="message">
       
      </div>  
      
      
    </div>

    <div class="bottom" id="bottom">
      
    </div>
    
     <div class="footer" id="footer">
      
    </div>

  </div>

  </body>
</html>